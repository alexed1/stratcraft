

<aura:component implements="flexipage:availableForAllPageTypes" controller="StrategyCrafterController">

<aura:attribute name="strategyXML" type="String" />
<aura:attribute name="curStratCopy" type="Strategy" />
<aura:attribute name="curStrat" type="Strategy" />
<aura:attribute name="curStratNode" type="Object" />
<aura:attribute name="treeItems" type="Object" /> 
<aura:attribute name="originalNode" type="Object"/>

<aura:attribute name="strategyNames" type="List" />
<aura:attribute name="selectedStrategyName" type="String" default="" />

<aura:handler name="init" value="{!this}" action="{!c.init}" />

<aura:handler name="xmlFileUploaded" event="c:XMLFileUploaded" action="{!c.processLoadedXMLString}"/>
<aura:handler event="c:propertyPageSaveRequestEvent" action="{!c.saveStrategy}"/>
<aura:handler event="c:treeNodeSelectedEvent" action="{!c.handleTreeNodeSelect }"/>

<aura:registerEvent name="xmlFileUploaded" type="c:XMLFileUploaded"/>

<div class="slds-card" >
        <lightning:spinner aura:id="mySpinner" class="slds-hide" size="large" />
        <c:modalDialog aura:id="unsavedChangesDialog" text="We noticed you have unsaved changes. Discard them?" headerText="Unsaved changes"/>
        <div>
            <lightning:buttonMenu iconName="utility:settings" alternativeText="Settings" onselect="{! c.handleMenuSelect }">
                <lightning:menuItem label="Load Strategy" value="load" />
                <lightning:menuItem label="Save Strategy" value="save"/>
               
            </lightning:buttonMenu>
 
            <lightning:select name="strategySelect" label="Select a strategy:" aura:id="mySelect" value="{!v.selectedStrategyName}" onchange="{!c.handleStrategySelection}">>

                <aura:iteration items="{!v.strategyNames}" var="item">
                    <option text="{!item}" value="{!item}" />
                 </aura:iteration>
            </lightning:select>
     



            <hr></hr>
            <p></p>
            <div aura:id="fileInput" ondragover="{!c.onDragOver}" ondrop="{!c.onDrop}" >Drop Here!</div> 
            <br>  </br>  
        </div>

        <div class="slds-grid ">

            <div class="slds-col">
                <c:treeNode aura:id="tree" treeItems="{! v.treeItems }" header="NodeTree"/>
            </div>

            <div class="slds-col">
                Node Properties
                {!v.body}                
                <c:BasePropertyPage aura:id="propertyPage"/>
            </div>

        </div>
</div>

</aura:component>	
